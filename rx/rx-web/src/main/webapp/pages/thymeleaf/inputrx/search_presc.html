<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="renderer" content="webkit">


<!-- HTTP 1.1 -->
<meta http-equiv="pragma" content="no-cache">
<!-- HTTP 1.0 -->
<meta http-equiv="cache-control" content="no-cache">
<!-- Prevent caching at the proxy server -->
<meta http-equiv="expires" content="0">

<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<div th:include="/thymeleaf/common/head3::headx('海典自费药房查询处方')" th:remove="tag"></div>

<link rel="stylesheet"
	th:href="@{/static/css/preview/print-preview.css}" type="text/css"
	media="all">

<link th:href="@{/static/css/hospital/hospital.css}" rel="stylesheet">

<link rel="stylesheet" th:href="@{/static/css/alert/alert.css}">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script th:src="@{/static/js/html5shiv/3.7.3/html5shiv.min.js}"></script>
      <script th:src="@{/static/js/respond.js/1.4.2/respond.min.js}"></script>
      <script th:src="@{/static/pie/pie.js}"></script>
    <![endif]-->

<style>
.icon-color .glyphicon-search, 
.icon-color .glyphicon-plus-sign {
	color: white;
	font-size: 16px;
	/* margin:0px 0px 0px 0px;
    	padding:0px 0px 0px 0px; */
} 

.form-inline button {
	vertical-align: middle;
}

</style>

</head>
<body>
	<div class="hospital">
		<nav class="navbar navbar-default">
			<div class="row">
				<div class="col-xs-6 nav-left"></div>
				<div class="col-xs-6 nav-right"></div>
			</div>
			<div class="container-fluid">
				<div class="basic_info clearfix">
					<h2>
						查询处方 <img th:src="@{/static/images/doctor.jpg}" alt="avatar">
						<span></span>
					</h2>
					<div id="basicForm" class="basic_form">
						<div class="row basic_top">
							<div class="col-xs-6">
								<div>
									<b>科室</b>
									<span th:text="${department.name}" id="department" th:attr="bind-id=${department.id}" style="padding-right: 50px;">001</span> 
									<b>医生</b>
									<span th:text="${doctorName}" id="doctor" th:attr="bind-id=${doctorId}"></span>
								</div>

							</div>
							<div class="col-xs-6">
								<p class="time pull-right">
									时间：<span
										th:text="${#calendars.format(diagnosisDate,'yyyy-MM-dd HH:MM:ss')}">2018-12-26
										23:56:58</span>
								</p>
							</div>
						</div>
						<!-- <div class="basic_bottom">
							<div class="info_container">
								用于保存病历号 
								<span id="patient-crno" name="patient-crno"
									style="display: none" th:text="${patient.crNo}">病历号</span>
								<p class="info_title">姓名</p>
								<p class="info_content">
									<span th:text="${patient.name}" id="patient"
										th:attr="bind-id=${patient.id}">张三</span>
								</p>
							</div>
							<div class="info_container">
								<p class="info_title">性别</p>
								<p class="info_content">
									<span th:switch="${patient.sex}" th:remove="tag"> <span
										th:case='1' th:remove="tag"><span>男 </span></span> <span
										th:case='2' th:remove="tag"><span>女 </span></span>
									</span>
								</p>
								<span></span>
							</div>
							<div class="info_container">
								<p class="info_title">年龄</p>
								<p class="info_content">
									<span th:text="${patient.old}">20</span>
								</p>
								<span></span>
							</div>
							<div class="info_container">
								<p class="info_title">费别</p>
								<p class="info_content">自费</p>
								<span></span>
							</div>
						</div> -->
					</div>
				</div>
			</div>
		</nav>
		
		<div class="container-fluid">
			<div class="row clearfix">
				<div class="col-md-12 column">
					<div class="tabbable" id="tabs-search-presc">
						<ul class="nav nav-tabs">
							<li class="active" onclick="javascript:hidePrescDetailTabFun();">
								 <a href="#panel-presc-items" data-toggle="tab">处方列表</a>
							</li>
							<li id="tab-presc-detail" class="hide">
								 <a href="#panel-presc-detail" data-toggle="tab">处方详情</a>
							</li>
						</ul>
						<div class="tab-content">
							<div class="tab-pane active" id="panel-presc-items">
								<!-- <div class="container-fluid"> -->
									<!-- <div class="card_container diagnosis" style="margin-top: 20px;">
										<h3>疾病诊断</h3>
										<div>
											<p style="padding-left: 50px;">
												<span th:each="diagnosis,iterStat:${diagnosisList}"> <span
													th:text="${iterStat.count}+':'+${diagnosis.disease}+';'"
													style="padding-right: 20px">诊断结果</span>
												</span>
											</p>
										</div>
									</div> -->
									<div class="drug_container" style="margin-top: 10px;">
										<div class="card_container diagnosis_msg">
											<!-- <input type="hidden" id="presc-no" name="presc-no"
												th:value="${prescNo}"> -->
											<!--查询条件  -->
											<h3>
												查询条件 <!-- <span
													style="font-size: 14px; font-weight: normal; margin-left: 20px;">处方编号:<span
													id="presc-no-display">新处方</span> <label class="control-label"
													style="font-weight: normal; margin-left: 20px;">处方药品数：<span
														id="presc-drug-number">0</span>个
												</label> <label class="control-label"
													style="padding-left: 20px; font-weight: normal;">总金额：<span
														id="presc-drug-sum">0</span>元
												</label>
												</span> -->
											</h3>
											<div>
												<form role="form" id="search-presc-form">
												<div class="form-inline icon-color">
													<div class="form-group form-group-sm">
														<label class="control-label">名称:</label>
														<input type="text" id="search-keyword" class="form-control" style="width: 200px;" placeholder="处方编号/患者姓名" />
													</div>
													<div class="form-group form-group-sm">
														<label class="control-label">开处方时间段:</label>
														<input type="text" id="search-start-time" style="width: 200px;"
															class="datetimepicker datetime form-control"
															readonly="readonly" placeholder="开始时间"
															onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" />
													</div>
													<div class="form-group form-group-sm">
														<input type="text" id="search-end-time" style="width: 200px;"
															class="datetimepicker datetime form-control"
															readonly="readonly" placeholder="结束时间"
															onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" />
													</div>
													<div class="form-group form-group-sm">
														<button type="button" id="search-submit-btn" class="btn btn-info" style="height:30px;width:60px;">
															<span class="glyphicon glyphicon-search"></span>
														</button>
													</div>
												</div>
												</form>
											</div>
										</div>
										<input type="hidden" id="doctor-id" th:value="${doctorId}" /><!-- 医生ID -->
										<div id="presc-table">
											<!-- 此处是处方列表table -->
											<div th:include="/thymeleaf/inputrx/search_presc_table::headx('处方table')" th:remove="tag"></div>
										</div>
									</div>
						
								<!-- </div> -->
							</div>
							<div class="tab-pane" id="panel-presc-detail">
								<!-- 此处显示处方详情 -->
								<!-- <div th:include="/thymeleaf/inputrx/search_presc_detail::headx('处方详情')" th:remove="tag"></div> -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>


	<!-- 用于加载打印模板 -->
	<div id="printarea" class="hide">
		<div id="printarea1" class="clearfix"></div>
		<!-- 正方 -->
		<div id="printarea2" class="clearfix"></div>
		<!-- 副方 -->
	</div>
	<!-- 此处不可以是iframe,否则会出现js无权限问题  -->

	<div id="print-preview-area" class="hide"></div>

	<!-- 打印预览 -->
	<!-- <script th:src="@{/static/js/jquery-tools/1.2.7/jquery.tools.min.js}" type="text/javascript"></script> -->
	<script th:src="@{/static/js/preview/jquery.print-preview.js}"
		type="text/javascript"></script>

	<!-- 打印 -->
	<script th:src="@{/static/js/jprint/jQuery.print.js}"
		type="text/javascript"></script>

	<!-- 条形码  -->
	<script th:src="@{/static/js/jquerybarcode/2.0.3/jquery-barcode.js}"
		type="text/javascript"></script>

	<script th:src="@{/static/js/alert/alert.js}"></script>

	<!-- 日期工具 -->
	<script type="text/javascript" th:src="@{/static/calendar/WdatePicker.js}"></script>

	<script type="text/javascript">
	
		/**
		 * 点击页面中查询处方中的查询按钮时执行
		 * 		函数功能：根据条件查询处方
		 */
		$("#search-submit-btn").click(function(){
			var params = new Object();
			params.pagehelperFun = "clickPageBtnSearchRequestFun";
			clickPageBtnSearchRequestFun(params);
		});
		/**
		 * 按条件查询后点击页面中的页码执行此函数
		 * 		函数功能：根据页码数和条件请求内容
		 */
		function clickPageBtnSearchRequestFun(params){
			var doctorId = $("#doctor-id").val();
			var patientId = $("#patient-id").val();
			var keyword = $("#search-keyword").val();
			var startTime = $("#search-start-time").val();
			var endTime = $("#search-end-time").val();
			var action = "presc-item";
			params.clickPageBtn = true;
			params.doctorId = doctorId;
			params.patientId = patientId;
			params.keyword = keyword;
			params.startTime = startTime;
			params.endTime = endTime;
			$("#presc-table").load(action, params, function(){
			});
		}
		
		/**
		 * 点击页面中的页码执行此函数
		 * 		函数功能：根据页码数请求内容
		 */
		function clickPageBtnRequestFun(params){
			var doctorId = $("#doctor-id").val();
			var patientId = $("#patient-id").val();
			var action = "presc-item";
			params.clickPageBtn = true;
			params.doctorId = doctorId;
			params.patientId = patientId;
			$("#presc-table").load(action, params, function(){
			});
		}
		
		/**
		 * 查询处方详情
		 */
		function selectPrescDetailFun(id){
			var action = "presc-detail";
			var params = {"id": id};
			$("#panel-presc-detail").load(action, params, function(){
				showPrescDetailTabFun();//显示处方详情选项卡
			});
		}
		/**
		 * 显示处方详情选项卡
		 */
		function showPrescDetailTabFun(){
			$("#tabs-search-presc #tab-presc-detail").removeClass("hide");
			$('#tabs-search-presc a[href="#panel-presc-detail"]').tab('show');
		}
		/**
		 * 隐藏处方详情选项卡
		 */
		function hidePrescDetailTabFun(){
			$('#tabs-search-presc a[href="#panel-presc-items"]').tab('show');
			$("#tabs-search-presc #tab-presc-detail").addClass("hide");
		}
	</script>

</body>
</html>